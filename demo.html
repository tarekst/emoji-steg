<!DOCTYPE html>
<html lang="en" class="h-full bg-gray-50">
<head>
    <meta charset="utf-8" />
    <title>emojiâ€‘steg Demo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body class="min-h-full flex flex-col items-center py-10">
<div class="w-full max-w-4xl px-4">
    <h1 class="text-3xl font-bold tracking-tight text-indigo-600 text-center mb-8">
        emojiâ€‘steg <span class="text-gray-900">Browser Demo</span>
    </h1>

    <!-- Encode / Decode grid -->
    <div class="grid md:grid-cols-2 gap-6">
        <!-- Encode Card -->
        <section class="bg-white shadow-md rounded-2xl p-6 flex flex-col">
            <h2 class="text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2">
                <span class="text-2xl">ğŸ”</span> Hide a Secret Message
            </h2>
            <label class="text-sm font-medium text-gray-700 mb-1" for="plain">Message</label>
            <textarea id="plain" rows="4" class="resize-none rounded-xl border border-gray-300 focus:ring-indigo-500 focus:border-indigo-500 p-3 text-sm" placeholder="Type your secret textâ€¦"></textarea>

            <label class="text-sm font-medium text-gray-700 mt-4 mb-1" for="pwd">Password</label>
            <div class="flex gap-2 items-center">
                <input id="pwd" type="password" class="flex-grow rounded-xl border border-gray-300 focus:ring-indigo-500 focus:border-indigo-500 p-3 text-sm" placeholder="Passwordâ€¦" />
                <button id="togglePwd" class="shrink-0 rounded-xl bg-gray-100 px-3 py-2 hover:bg-gray-200" title="Show / hide password">ğŸ‘ï¸</button>
            </div>

            <label class="text-sm font-medium text-gray-700 mt-4 mb-1" for="emoji">Emoji (blank = random)</label>
            <div class="flex gap-2 items-center">
                <input id="emoji" class="flex-grow rounded-xl border border-gray-300 focus:ring-indigo-500 focus:border-indigo-500 p-3 text-sm text-center" />
                <button id="btnEmojiRandom" class="shrink-0 rounded-xl bg-gray-100 px-3 py-2 hover:bg-gray-200" title="Generate random emoji">ğŸ”„</button>
                <button id="btnEmojiPicker" class="shrink-0 rounded-xl bg-gray-100 px-3 py-2 hover:bg-gray-200" title="Open emoji picker">ğŸ˜Š</button>
            </div>

            <button id="btnEncrypt" class="mt-6 inline-flex justify-center items-center gap-2 rounded-xl bg-indigo-600 px-4 py-2 text-white font-medium shadow hover:bg-indigo-700 transition-colors">Hide in Emoji</button>

            <label class="text-sm font-medium text-gray-700 mt-6 mb-1" for="cipher">Generated Emoji</label>
            <div class="flex gap-2 items-center">
                <input id="cipher" readonly class="flex-grow min-w-0 rounded-xl border border-gray-300 p-3 text-center text-2xl" />
                <button id="btnCopy" class="shrink-0 rounded-xl bg-gray-100 px-3 py-2 text-sm hover:bg-gray-200" title="Copy to clipboard">ğŸ“‹</button>
            </div>
        </section>

        <!-- Decode Card -->
        <section class="bg-white shadow-md rounded-2xl p-6 flex flex-col">
            <h2 class="text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2">
                <span class="text-2xl">ğŸ”</span> Reveal the Hidden Message
            </h2>
            <label class="text-sm font-medium text-gray-700 mb-1" for="cipherIn">Emoji with hidden text</label>
            <input id="cipherIn" class="rounded-xl border border-gray-300 focus:ring-indigo-500 focus:border-indigo-500 p-3 text-2xl text-center" placeholder="ğŸ”’" />

            <label class="text-sm font-medium text-gray-700 mt-4 mb-1" for="pwd2">Password</label>
            <div class="flex gap-2 items-center">
                <input id="pwd2" type="password" class="flex-grow rounded-xl border border-gray-300 focus:ring-indigo-500 focus:border-indigo-500 p-3 text-sm" placeholder="Passwordâ€¦" />
                <button id="togglePwd2" class="shrink-0 rounded-xl bg-gray-100 px-3 py-2 hover:bg-gray-200" title="Show / hide password">ğŸ‘ï¸</button>
            </div>

            <button id="btnDecrypt" class="mt-6 inline-flex justify-center items-center gap-2 rounded-xl bg-indigo-600 px-4 py-2 text-white font-medium shadow hover:bg-indigo-700 transition-colors">Decrypt</button>

            <div id="decoded" class="mt-4 text-center text-lg font-semibold text-gray-800 break-words"></div>
        </section>
    </div>
</div>

<!-- Emoji Picker Modal -->
<div id="emojiModal" class="fixed inset-0 z-50 hidden flex items-center justify-center bg-black/50">
    <div class="bg-white w-11/12 max-w-5xl rounded-2xl shadow-lg p-6 flex flex-col gap-4">
        <div class="flex justify-between items-center mb-2">
            <h3 class="text-lg font-semibold">Pick an emoji</h3>
            <button id="closeModal" class="text-xl leading-none hover:text-red-500">Ã—</button>
        </div>
        <div>
            <div id="tabTriggers" class="flex flex-wrap gap-2 border-b mb-4 overflow-x-auto"></div>
            <div id="tabPanels" class="h-[32rem] overflow-y-auto pr-1"></div>
        </div>
    </div>
</div>

<!-- Library -->
<script>window.exports = {};</script>
<script src="https://cdn.jsdelivr.net/gh/tarekst/emoji-steg/src/emoji-steg.js"></script>
<script>
  (function(){
    const { encryptInEmoji:enc, decryptFromEmoji:dec } = window.exports;
    const $ = id => document.getElementById(id);

    const plain=$("plain"), pwd=$("pwd"), emojiInp=$("emoji"), cipherInp=$("cipher"), cipherIn=$("cipherIn"), pwd2=$("pwd2"), decoded=$("decoded");
    const togglePwd=$("togglePwd"), togglePwd2=$("togglePwd2"), btnRand=$("btnEmojiRandom"), btnPicker=$("btnEmojiPicker"), btnEncrypt=$("btnEncrypt"), btnCopy=$("btnCopy"), btnDecrypt=$("btnDecrypt");
    const modal=$("emojiModal"), closeBtn=$("closeModal"), tabTrig=$("tabTriggers"), tabPanels=$("tabPanels");

    const categories = {
      "Smileys & Emotions": [
        "ğŸ˜€", "ğŸ˜ƒ", "ğŸ˜„", "ğŸ˜", "ğŸ˜†", "ğŸ˜…", "ğŸ¤£", "ğŸ˜‚", "ğŸ™‚", "ğŸ™ƒ", "ğŸ˜‰", "ğŸ˜Š", "ğŸ˜‡", "ğŸ¥°", "ğŸ˜", "ğŸ¤©", "ğŸ˜˜", "ğŸ˜—", "ğŸ˜š", "ğŸ˜™",
        "ğŸ˜‹", "ğŸ˜›", "ğŸ˜œ", "ğŸ¤ª", "ğŸ˜", "ğŸ¤‘", "ğŸ¤—", "ğŸ¤­", "ğŸ¤«", "ğŸ¤”", "ğŸ¤", "ğŸ¤¨", "ğŸ˜", "ğŸ˜‘", "ğŸ˜¶", "ğŸ˜", "ğŸ˜’", "ğŸ™„", "ğŸ˜¬", "ğŸ¤¥",
        "ğŸ˜Œ", "ğŸ˜”", "ğŸ˜ª", "ğŸ¤¤", "ğŸ˜´", "ğŸ˜·", "ğŸ¤’", "ğŸ¤•", "ğŸ¤¢", "ğŸ¤®", "ğŸ¤§", "ğŸ¥µ", "ğŸ¥¶", "ğŸ¥´", "ğŸ˜µ", "ğŸ¤¯", "ğŸ¤ ", "ğŸ¥³", "ğŸ˜", "ğŸ¤“",
        "ğŸ§", "ğŸ˜•", "ğŸ˜Ÿ", "ğŸ™", "â˜¹ï¸", "ğŸ˜®", "ğŸ˜¯", "ğŸ˜²", "ğŸ˜³", "ğŸ¥º", "ğŸ˜¦", "ğŸ˜§", "ğŸ˜¨", "ğŸ˜°", "ğŸ˜¥", "ğŸ˜¢", "ğŸ˜­", "ğŸ˜±", "ğŸ˜–", "ğŸ˜£",
        "ğŸ˜", "ğŸ˜“", "ğŸ˜©", "ğŸ˜«", "ğŸ¥±", "ğŸ˜¤", "ğŸ˜¡", "ğŸ˜ ", "ğŸ¤¬", "ğŸ˜ˆ", "ğŸ‘¿", "ğŸ’€", "â˜ ï¸", "ğŸ’©", "ğŸ¤¡", "ğŸ‘¹", "ğŸ‘º", "ğŸ‘»", "ğŸ‘½", "ğŸ‘¾",
        "ğŸ¤–", "ğŸ˜º", "ğŸ˜¸", "ğŸ˜¹", "ğŸ˜»", "ğŸ˜¼", "ğŸ˜½", "ğŸ™€", "ğŸ˜¿", "ğŸ˜¾"
      ],
      "Gestures & People": [
        "ğŸ‘‹", "ğŸ¤š", "ğŸ–ï¸", "âœ‹", "ğŸ––", "ğŸ‘Œ", "ğŸ¤Œ", "ğŸ¤", "âœŒï¸", "ğŸ¤", "ğŸ¤Ÿ", "ğŸ¤˜", "ğŸ¤™", "ğŸ‘ˆ", "ğŸ‘‰", "ğŸ‘†", "ğŸ–•", "ğŸ‘‡", "â˜ï¸", "ğŸ‘",
        "ğŸ‘", "âœŠ", "ğŸ‘Š", "ğŸ¤›", "ğŸ¤œ", "ğŸ‘", "ğŸ™Œ", "ğŸ‘", "ğŸ¤²", "ğŸ¤", "ğŸ™", "âœï¸", "ğŸ’…", "ğŸ¤³", "ğŸ’ª", "ğŸ¦¾", "ğŸ¦¿", "ğŸ¦µ", "ğŸ¦¶", "ğŸ‘‚",
        "ğŸ¦»", "ğŸ‘ƒ", "ğŸ§ ", "ğŸ«€", "ğŸ«", "ğŸ¦·", "ğŸ¦´", "ğŸ‘€", "ğŸ‘ï¸", "ğŸ‘…", "ğŸ‘„", "ğŸ‘¶", "ğŸ§’", "ğŸ‘¦", "ğŸ‘§", "ğŸ§‘", "ğŸ‘±", "ğŸ‘¨", "ğŸ§”", "ğŸ‘¨â€ğŸ¦°",
        "ğŸ‘¨â€ğŸ¦±", "ğŸ‘¨â€ğŸ¦³", "ğŸ‘¨â€ğŸ¦²", "ğŸ‘©", "ğŸ‘©â€ğŸ¦°", "ğŸ§‘â€ğŸ¦°", "ğŸ‘©â€ğŸ¦±", "ğŸ§‘â€ğŸ¦±", "ğŸ‘©â€ğŸ¦³", "ğŸ§‘â€ğŸ¦³", "ğŸ‘©â€ğŸ¦²", "ğŸ§‘â€ğŸ¦²", "ğŸ‘±â€â™€ï¸", "ğŸ‘±â€â™‚ï¸", "ğŸ§“", "ğŸ‘´", "ğŸ‘µ"
      ],
      "Animals": [
        "ğŸµ", "ğŸ’", "ğŸ¦", "ğŸ¦§", "ğŸ¶", "ğŸ•", "ğŸ¦®", "ğŸ•â€ğŸ¦º", "ğŸ©", "ğŸº", "ğŸ¦Š", "ğŸ¦", "ğŸ±", "ğŸˆ", "ğŸˆâ€â¬›", "ğŸ¦", "ğŸ¯", "ğŸ…", "ğŸ†", "ğŸ´",
        "ğŸ", "ğŸ¦„", "ğŸ¦“", "ğŸ¦Œ", "ğŸ¦¬", "ğŸ®", "ğŸ‚", "ğŸƒ", "ğŸ„", "ğŸ·", "ğŸ–", "ğŸ—", "ğŸ½", "ğŸ", "ğŸ‘", "ğŸ", "ğŸª", "ğŸ«", "ğŸ¦™", "ğŸ¦’",
        "ğŸ˜", "ğŸ¦£", "ğŸ¦", "ğŸ¦›", "ğŸ­", "ğŸ", "ğŸ€", "ğŸ¹", "ğŸ°", "ğŸ‡", "ğŸ¿ï¸", "ğŸ¦«", "ğŸ¦”", "ğŸ¦‡", "ğŸ»", "ğŸ»â€â„ï¸", "ğŸ¨", "ğŸ¼", "ğŸ¦¥", "ğŸ¦¦",
        "ğŸ¦¨", "ğŸ¦˜", "ğŸ¦¡", "ğŸ¾", "ğŸ¦ƒ", "ğŸ”", "ğŸ“", "ğŸ£", "ğŸ¤", "ğŸ¥", "ğŸ¦", "ğŸ§", "ğŸ•Šï¸", "ğŸ¦…", "ğŸ¦†", "ğŸ¦¢", "ğŸ¦‰", "ğŸ¦¤", "ğŸª¶", "ğŸ¦©",
        "ğŸ¦š", "ğŸ¦œ", "ğŸ¸", "ğŸŠ", "ğŸ¢", "ğŸ¦", "ğŸ", "ğŸ²", "ğŸ‰", "ğŸ¦•", "ğŸ¦–", "ğŸ³", "ğŸ‹", "ğŸ¬", "ğŸ¦­", "ğŸŸ", "ğŸ ", "ğŸ¡", "ğŸ¦ˆ", "ğŸ™",
        "ğŸš", "ğŸŒ", "ğŸ¦‹", "ğŸ›", "ğŸœ", "ğŸ", "ğŸª²", "ğŸ", "ğŸ¦—", "ğŸª³", "ğŸ•·ï¸", "ğŸ•¸ï¸", "ğŸ¦‚", "ğŸ¦Ÿ", "ğŸª°", "ğŸª±"
      ],
      "Food & Drink": [
        "ğŸ‡", "ğŸˆ", "ğŸ‰", "ğŸŠ", "ğŸ‹", "ğŸŒ", "ğŸ", "ğŸ¥­", "ğŸ", "ğŸ", "ğŸ", "ğŸ‘", "ğŸ’", "ğŸ“", "ğŸ«", "ğŸ¥", "ğŸ…", "ğŸ«’", "ğŸ¥¥", "ğŸ¥‘",
        "ğŸ†", "ğŸ¥”", "ğŸ¥•", "ğŸŒ½", "ğŸŒ¶ï¸", "ğŸ«‘", "ğŸ¥’", "ğŸ¥¬", "ğŸ¥¦", "ğŸ§„", "ğŸ§…", "ğŸ„", "ğŸ¥œ", "ğŸŒ°", "ğŸ", "ğŸ¥", "ğŸ¥–", "ğŸ«“", "ğŸ¥¨", "ğŸ¥¯",
        "ğŸ¥", "ğŸ§‡", "ğŸ§€", "ğŸ–", "ğŸ—", "ğŸ¥©", "ğŸ¥“", "ğŸ”", "ğŸŸ", "ğŸ•", "ğŸŒ­", "ğŸ¥ª", "ğŸŒ®", "ğŸŒ¯", "ğŸ«”", "ğŸ¥™", "ğŸ§†", "ğŸ¥š", "ğŸ³", "ğŸ¥˜",
        "ğŸ²", "ğŸ«•", "ğŸ¥£", "ğŸ¥—", "ğŸ¿", "ğŸ§ˆ", "ğŸ§‚", "ğŸ¥«", "ğŸ±", "ğŸ˜", "ğŸ™", "ğŸš", "ğŸ›", "ğŸœ", "ğŸ", "ğŸ ", "ğŸ¢", "ğŸ£", "ğŸ¤", "ğŸ¥",
        "ğŸ¥®", "ğŸ¡", "ğŸ¥Ÿ", "ğŸ¥ ", "ğŸ¥¡", "ğŸ¦€", "ğŸ¦", "ğŸ¦", "ğŸ¦‘", "ğŸ¦ª", "ğŸ¦", "ğŸ§", "ğŸ¨", "ğŸ©", "ğŸª", "ğŸ‚", "ğŸ°", "ğŸ§", "ğŸ¥§", "ğŸ«",
        "ğŸ¬", "ğŸ­", "ğŸ®", "ğŸ¯", "ğŸ¼", "ğŸ¥›", "â˜•", "ğŸ«–", "ğŸµ", "ğŸ¶", "ğŸ¾", "ğŸ·", "ğŸ¸", "ğŸ¹", "ğŸº", "ğŸ»", "ğŸ¥‚", "ğŸ¥ƒ", "ğŸ¥¤", "ğŸ§‹",
        "ğŸ§ƒ", "ğŸ§‰", "ğŸ§Š"
      ],
      "Sports & Activities": [
        "âš½", "ğŸ€", "ğŸˆ", "âš¾", "ğŸ¥", "ğŸ¾", "ğŸ", "ğŸ‰", "ğŸ¥", "ğŸ±", "ğŸª€", "ğŸ“", "ğŸ¸", "ğŸ’", "ğŸ‘", "ğŸ¥", "ğŸ", "ğŸªƒ", "ğŸ¥…", "â›³",
        "ğŸª", "ğŸ¹", "ğŸ£", "ğŸ¤¿", "ğŸ¥Š", "ğŸ¥‹", "ğŸ½", "ğŸ›¹", "ğŸ›¼", "ğŸ›·", "â›¸ï¸", "ğŸ¥Œ", "ğŸ¿", "â›·ï¸", "ğŸ‚", "ğŸª‚", "ğŸ‹ï¸", "ğŸ‹ï¸â€â™€ï¸", "ğŸ‹ï¸â€â™‚ï¸", "ğŸ¤¼",
        "ğŸ¤¼â€â™€ï¸", "ğŸ¤¼â€â™‚ï¸", "ğŸ¤¸", "ğŸ¤¸â€â™€ï¸", "ğŸ¤¸â€â™‚ï¸", "â›¹ï¸", "â›¹ï¸â€â™€ï¸", "â›¹ï¸â€â™‚ï¸", "ğŸ¤º", "ğŸ¤¾", "ğŸ¤¾â€â™€ï¸", "ğŸ¤¾â€â™‚ï¸", "ğŸŒï¸", "ğŸŒï¸â€â™€ï¸", "ğŸŒï¸â€â™‚ï¸", "ğŸ‡", "ğŸ§˜", "ğŸ§˜â€â™€ï¸", "ğŸ§˜â€â™‚ï¸", "ğŸ„",
        "ğŸ„â€â™€ï¸", "ğŸ„â€â™‚ï¸", "ğŸŠ", "ğŸŠâ€â™€ï¸", "ğŸŠâ€â™‚ï¸", "ğŸ¤½", "ğŸ¤½â€â™€ï¸", "ğŸ¤½â€â™‚ï¸", "ğŸš£", "ğŸš£â€â™€ï¸", "ğŸš£â€â™‚ï¸", "ğŸ§—", "ğŸ§—â€â™€ï¸", "ğŸ§—â€â™‚ï¸", "ğŸšµ", "ğŸšµâ€â™€ï¸", "ğŸšµâ€â™‚ï¸", "ğŸš´", "ğŸš´â€â™€ï¸", "ğŸš´â€â™‚ï¸"
      ],
      "Travel & Places": [
        "ğŸš€", "ğŸ›¸", "ğŸ›°ï¸", "ğŸª", "ğŸŒ", "ğŸŒ", "ğŸŒ", "ğŸŒ‘", "ğŸŒ’", "ğŸŒ“", "ğŸŒ”", "ğŸŒ•", "ğŸŒ–", "ğŸŒ—", "ğŸŒ˜", "ğŸŒ™", "ğŸŒš", "ğŸŒ›", "ğŸŒœ", "â˜€ï¸",
        "ğŸŒ", "ğŸŒ", "â­", "ğŸŒŸ", "ğŸŒ ", "ğŸŒŒ", "â˜ï¸", "â›…", "â›ˆï¸", "ğŸŒ¤ï¸", "ğŸŒ¥ï¸", "ğŸŒ¦ï¸", "ğŸŒ§ï¸", "ğŸŒ¨ï¸", "ğŸŒ©ï¸", "ğŸŒªï¸", "ğŸŒ«ï¸", "ğŸŒ¬ï¸", "ğŸŒˆ", "â˜‚ï¸",
        "â˜”", "âš¡", "â„ï¸", "â˜ƒï¸", "â›„", "â˜„ï¸", "ğŸ”¥", "ğŸ’§", "ğŸŒŠ", "ğŸ™ï¸", "ğŸŒ†", "ğŸŒ‡", "ğŸŒƒ", "ğŸŒ‰", "ğŸ ", "ğŸ¡", "ğŸ—ï¸", "ğŸ¢", "ğŸ¬", "ğŸ£",
        "ğŸ¤", "ğŸ¥", "ğŸ¦", "ğŸ¨", "ğŸª", "ğŸ«", "ğŸ©", "ğŸ’’", "ğŸ›ï¸", "â›ª", "ğŸ•Œ", "ğŸ•", "ğŸ›•", "ğŸ•‹", "â›©ï¸", "ğŸ›¤ï¸", "ğŸ›£ï¸", "ğŸ—¾", "ğŸ‘", "ğŸï¸",
        "ğŸŒ…", "ğŸŒ„", "ğŸŒ ", "ğŸ‡", "ğŸ†", "ğŸŒ‡", "ğŸ™ï¸", "ğŸŒƒ", "ğŸŒŒ", "ğŸŒ‰", "ğŸŒ", "ğŸ›«", "ğŸ›¬", "ğŸ›©ï¸", "ğŸ’º", "ğŸš", "ğŸšŸ", "ğŸš ", "ğŸš¡", "ğŸš€",
        "ğŸ›¸", "ğŸš‡", "ğŸš„", "ğŸš…", "ğŸšˆ", "ğŸš‰", "ğŸš‚", "ğŸš†", "ğŸšŠ", "ğŸš", "ğŸš", "ğŸš‹", "ğŸšŒ", "ğŸš", "ğŸš", "ğŸš", "ğŸš‘", "ğŸš’", "ğŸš“", "ğŸš”",
        "ğŸš•", "ğŸš–", "ğŸš—", "ğŸš˜", "ğŸš™", "ğŸšš", "ğŸš›", "ğŸšœ", "ğŸ¦¯", "ğŸ¦½", "ğŸ¦¼", "ğŸ›´", "ğŸš²", "ğŸ›µ", "ğŸï¸", "ğŸ›º", "ğŸš¨", "ğŸš¥", "ğŸš¦", "ğŸ›‘",
        "ğŸš§", "âš“", "â›µ", "ğŸ›¶", "ğŸš¤", "ğŸ›³ï¸", "â›´ï¸", "ğŸ›¥ï¸", "ğŸš¢", "âœˆï¸", "ğŸ›«", "ğŸ›¬", "ğŸª‚", "ğŸ’º", "ğŸš", "ğŸšŸ", "ğŸš ", "ğŸš¡", "ğŸš", "ğŸš€"
      ],
      "Objects & Symbols": [
        "âŒš", "ğŸ“±", "ğŸ“²", "ğŸ’»", "âŒ¨ï¸", "ğŸ–¥ï¸", "ğŸ–¨ï¸", "ğŸ–±ï¸", "ğŸ–²ï¸", "ğŸ•¹ï¸", "ğŸ—œï¸", "ğŸ’½", "ğŸ’¾", "ğŸ’¿", "ğŸ“€", "ğŸ“¼", "ğŸ“·", "ğŸ“¸", "ğŸ“¹", "ğŸ¥",
        "ğŸ“½ï¸", "ğŸï¸", "ğŸ“", "â˜ï¸", "ğŸ“Ÿ", "ğŸ“ ", "ğŸ“º", "ğŸ“»", "ğŸ™ï¸", "ğŸšï¸", "ğŸ›ï¸", "ğŸ§­", "â±ï¸", "â²ï¸", "â°", "ğŸ•°ï¸", "âŒ›", "â³", "ğŸ“¡", "ğŸ”‹",
        "ğŸ”Œ", "ğŸ’¡", "ğŸ”¦", "ğŸ•¯ï¸", "ğŸª”", "ğŸ§¯", "ğŸ›¢ï¸", "ğŸ’¸", "ğŸ’µ", "ğŸ’´", "ğŸ’¶", "ğŸ’·", "ğŸ’°", "ğŸ’³", "ğŸ’", "âš–ï¸", "ğŸªœ", "ğŸ§°", "ğŸª›", "ğŸ”§",
        "ğŸ”¨", "âš’ï¸", "ğŸ› ï¸", "ğŸ§²", "ğŸ”©", "âš™ï¸", "ğŸ§±", "â›“ï¸", "ğŸ§ª", "ğŸ§«", "ğŸ§¬", "ğŸ”¬", "ğŸ”­", "ğŸ“¡", "ğŸ’‰", "ğŸ©¸", "ğŸ’Š", "ğŸ©¹", "ğŸ©º", "ğŸšª",
        "ğŸª‘", "ğŸš½", "ğŸš¿", "ğŸ›", "ğŸª¤", "ğŸª’", "ğŸ§´", "ğŸ§·", "ğŸ§¹", "ğŸ§º", "ğŸ§»", "ğŸª£", "ğŸ§¼", "ğŸª¥", "ğŸ§½", "ğŸ§¯", "ğŸ›’", "ğŸš¬", "âš°ï¸", "ğŸª¦",
        "âš±ï¸", "ğŸ—¿", "ğŸª§", "ğŸ§", "ğŸš®", "ğŸš°", "â™¿", "ğŸš¹", "ğŸšº", "ğŸš»", "ğŸš¼", "ğŸš¾", "ğŸ›‚", "ğŸ›ƒ", "ğŸ›„", "ğŸ›…", "âš ï¸", "ğŸš¸", "â›”", "ğŸš«",
        "ğŸš³", "ğŸš­", "ğŸš¯", "ğŸš±", "ğŸš·", "ğŸ“µ", "ğŸ”", "â˜¢ï¸", "â˜£ï¸", "â¬†ï¸", "â†—ï¸", "â¡ï¸", "â†˜ï¸", "â¬‡ï¸", "â†™ï¸", "â¬…ï¸", "â†–ï¸", "â†•ï¸", "â†”ï¸", "â†©ï¸",
        "â†ªï¸", "â¤´ï¸", "â¤µï¸", "ğŸ”ƒ", "ğŸ”„", "ğŸ”™", "ğŸ”š", "ğŸ”›", "ğŸ”œ", "ğŸ”", "ğŸ›", "âš›ï¸", "ğŸ•‰ï¸", "âœ¡ï¸", "â˜¸ï¸", "â˜¯ï¸", "âœï¸", "â˜¦ï¸", "â˜ªï¸", "â˜®ï¸",
        "ğŸ•", "ğŸ”¯", "â™ˆ", "â™‰", "â™Š", "â™‹", "â™Œ", "â™", "â™", "â™", "â™", "â™‘", "â™’", "â™“", "â›", "ğŸ”€", "ğŸ”", "ğŸ”‚", "â–¶ï¸", "â©", "â­ï¸", "â¯ï¸",
        "â—€ï¸", "âª", "â®ï¸", "ğŸ”¼", "â«", "ğŸ”½", "â¬", "â¸ï¸", "â¹ï¸", "âºï¸", "âï¸", "ğŸ¦", "ğŸ”…", "ğŸ”†", "ğŸ“¶", "ğŸ“³", "ğŸ“´", "â™€ï¸", "â™‚ï¸", "âš§ï¸", "âœ–ï¸",
        "â•", "â–", "â—", "â™¾ï¸", "â€¼ï¸", "â‰ï¸", "â“", "â”", "â•", "â—", "ã€°ï¸", "ğŸ’±", "ğŸ’²", "âš•ï¸", "â™»ï¸", "âšœï¸", "ğŸ”±", "ğŸ“›", "ğŸ”°", "â­•", "âœ…",
        "â˜‘ï¸", "âœ”ï¸", "âŒ", "â", "â°", "â¿", "ã€½ï¸", "âœ³ï¸", "âœ´ï¸", "â‡ï¸", "Â©ï¸", "Â®ï¸", "â„¢ï¸", "#ï¸âƒ£", "*ï¸âƒ£", "0ï¸âƒ£", "1ï¸âƒ£", "2ï¸âƒ£", "3ï¸âƒ£", "4ï¸âƒ£",
        "5ï¸âƒ£", "6ï¸âƒ£", "7ï¸âƒ£", "8ï¸âƒ£", "9ï¸âƒ£", "ğŸ”Ÿ", "ğŸ” ", "ğŸ”¡", "ğŸ”¢", "ğŸ”£", "ğŸ”¤", "ğŸ…°ï¸", "ğŸ†", "ğŸ…±ï¸", "ğŸ†‘", "ğŸ†’", "ğŸ†“", "â„¹ï¸", "ğŸ†”", "â“‚ï¸",
        "ğŸ†•", "ğŸ†–", "ğŸ…¾ï¸", "ğŸ†—", "ğŸ…¿ï¸", "ğŸ†˜", "ğŸ†™", "ğŸ†š", "ğŸˆ", "ğŸˆ‚ï¸", "ğŸˆ·ï¸", "ğŸˆ¶", "ğŸˆ¯", "ğŸ‰", "ğŸˆ¹", "ğŸˆš", "ğŸˆ²", "ğŸ‰‘", "ğŸˆ¸", "ğŸˆ´",
        "ğŸˆ³", "ãŠ—ï¸", "ãŠ™ï¸", "ğŸˆº", "ğŸˆµ", "ğŸ”´", "ğŸŸ ", "ğŸŸ¡", "ğŸŸ¢", "ğŸ”µ", "ğŸŸ£", "ğŸŸ¤", "âš«", "âšª", "ğŸŸ¥", "ğŸŸ§", "ğŸŸ¨", "ğŸŸ©", "ğŸŸ¦", "ğŸŸª", "ğŸŸ«", "â¬›",
        "â¬œ", "â—¼ï¸", "â—»ï¸", "â—¾", "â—½", "â–ªï¸", "â–«ï¸", "ğŸ”¶", "ğŸ”·", "ğŸ”¸", "ğŸ”¹", "ğŸ”º", "ğŸ”»", "ğŸ’ ", "ğŸ”˜", "ğŸ”³", "ğŸ”²"
      ]
    };

    // ---------- Build Tabs & Panels -----------
    function buildTabs(){
      tabTrig.innerHTML="";
      tabPanels.innerHTML="";
      let first=true;
      for(const [label,list] of Object.entries(categories)){
        // trigger button
        const trig=document.createElement("button");
        trig.textContent=label;
        trig.className="px-3 py-1 rounded-t-lg text-sm";
        trig.dataset.tab=label;
        trig.onclick=()=>activate(label);
        tabTrig.appendChild(trig);

        // panel grid
        const panel=document.createElement("div");
        panel.dataset.tab=label;
        panel.className="hidden grid grid-cols-10 gap-2 p-2";
        list.forEach(e=>{
          const btn=document.createElement("button");
          btn.textContent=e;
          btn.className="text-2xl hover:scale-110 transition-transform";
          btn.onclick=()=>{emojiInp.value=e; closeModal();};
          panel.appendChild(btn);
        });
        tabPanels.appendChild(panel);
        if(first){ activate(label); first=false; }
      }
      if(!first){ /* at least one tab built */ }
      else{ tabPanels.innerHTML = '<p class="p-4 text-center text-sm text-gray-500">No categories loaded yet.</p>'; }
    }

    function activate(label){
      [...tabTrig.children].forEach(b=>{
        const act=b.dataset.tab===label;
        b.className=act?"px-3 py-1 rounded-t-lg text-sm bg-indigo-600 text-white":"px-3 py-1 rounded-t-lg text-sm hover:bg-gray-100";
      });
      [...tabPanels.children].forEach(p=>p.classList.toggle("hidden",p.dataset.tab!==label));
    }

    // ---------- Modal helpers ---------------
    function openModal(){ modal.classList.remove("hidden"); }
    function closeModal(){ modal.classList.add("hidden"); }
    btnPicker.onclick=openModal;
    closeBtn.onclick=closeModal;
    modal.onclick=e=>{ if(e.target===modal) closeModal(); };

    // ---------- Random emoji (library) ------
    btnRand.onclick=()=>{ if(window.exports.EmojiSteg){ emojiInp.value=new window.exports.EmojiSteg().getRandomEmoji(); } };

    // ---------- Password toggles ------------
    const toggleVis=input=>{ input.type=input.type==="password"?"text":"password"; };
    togglePwd.onclick=()=>toggleVis(pwd);
    togglePwd2.onclick=()=>toggleVis(pwd2);

    // ---------- Encrypt / Decrypt -----------
    btnEncrypt.onclick=()=>{
      const res=enc(plain.value,pwd.value,emojiInp.value.trim()||undefined);
      cipherInp.value=cipherIn.value=res;
      if(!emojiInp.value.trim()) emojiInp.value=res;
    };
    btnCopy.onclick=()=>{ if(cipherInp.value) navigator.clipboard.writeText(cipherInp.value); };
    btnDecrypt.onclick=()=>{
      try{ decoded.textContent=dec(cipherIn.value.trim(),pwd2.value); decoded.classList.remove("text-red-600"); }
      catch{ decoded.textContent="âŒ Wrong password or no data found"; decoded.classList.add("text-red-600"); }
    };

    // Initial tab build (empty)
    buildTabs();

    // Expose for manual fill via console if desired
    window.emojiCategories = categories;
    window.refreshEmojiTabs = buildTabs;
  })();
</script>
</body>
</html>
